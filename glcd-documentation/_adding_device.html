<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>GLCD Library: Adding a new device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GLCD Library
   </div>
   <div id="projectbrief">A C Library for Embedded Applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_adding_device.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Adding a new device </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="AddingDevice"></a>
Adding a new device</h1>
<p>Before you add a device, you should make sure you have set up your controller code.</p>
<p>To add a custom device (microcontroller) implementation, you may wish to check out the source code of the existing devices for some guidance. Note that references to "device" refers to a microcontroller, not the graphics controller.</p>
<p>The device specific code is stored under: </p>
<pre class="fragment">devices/
</pre><p>For example, files relating to NXP LPC111x are <code><a class="el" href="_l_p_c111x_8c.html" title="Initialisation and driver confiuration for NXP LPC111x ARM Cortex-M0 MCUs. ">devices/LPC111x.c</a></code> and <code><a class="el" href="_l_p_c111x_8h.html" title="Pinouts and driver config for NXP LPC111x ARM Cortex-M0 MCUs. ">devices/LPC111x.h</a></code></p>
<h2><a class="anchor" id="DeviceRequiredFunctions"></a>
Required functions</h2>
<p>These files define behaviour which are specific to that device. Behaviour specific to a type of device should be <b>not</b> placed in any other directory other than this.</p>
<p>These files should have functions for all those declared in by <code><a class="el" href="glcd__devices_8h.html" title="Functions specific to certain devices (microcontrollers). ">glcd_devices.h</a></code>.</p>
<p>This currently only includes, in the case of SPI operation: </p>
<pre class="fragment">    glcd_init(void)
    glcd_reset(void)
    glcd_spi_write(uint8_t c)
</pre><p>In the case of parallel chipset operation <code>glcd_parallel_write(uint8_t c)</code> is used instead of <code><a class="el" href="group___devices.html#ga768f5d37837bfc116dc8eea346072e03" title="Write a byte to the connected SPI slave. ">glcd_spi_write(uint8_t c)</a></code>.</p>
<p>For chipsets that may not need ay of the functions above, you'll still need to define the function in your code, even if you just leave it blank.</p>
<p>The corresponding <code>devices/mydevice.h</code> should be used as well to store all required constants. Try and avoid using "magic numbers" in the code. This header file should also be used to store port and pin information for the implementation.</p>
<p>Example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define PCD8544_SPI_PORT_NUMBER 1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_MOSI_PORT LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_MOSI_PIN  3</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_MISO_PORT LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_MISO_PIN  2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_SCK_PORT  LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_SCK_PIN   1</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_SS_PORT   LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_SS_PIN    0</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_DC_PORT   LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_DC_PIN    4</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define PCD8544_RST_PORT  LPC_GPIO2</span></div>
<div class="line"><span class="preprocessor">#define PCD8544_RST_PIN   5</span></div>
</div><!-- fragment --><p>If certain code is specific to a controller and is not universal, use ifdef statements to isolate them e.g:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#if defined(GLCD_CONTROLLER_PCD8544)</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">/* insert code */</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">/* Use a meaningful error message */</span></div>
<div class="line"><span class="preprocessor">        #error &quot;Controller not supported for LPC111x&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h2>Updating <a class="el" href="glcd_8h.html" title="GLCD Library main header file. ">glcd.h</a></h2>
<p>After adding your device and controller, you'll also need to edit <a class="el" href="glcd_8h.html" title="GLCD Library main header file. ">glcd.h</a>, and make any additions as needed. Take a look at the existing code to see what needs to be done. Devices specific such as preprocessor macros, compiler specific include statements can be added here.</p>
<h2>Overriding configurations</h2>
<p>Coming soon. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 19 2013 01:26:32 for GLCD Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
